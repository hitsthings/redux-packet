{"version":3,"file":"redux-packet.js","sources":["../src/pack.js","../src/consume.js"],"sourcesContent":["import { bindActionCreators } from \"redux\";\n\n/*\n//usage of pack\npackAll({\n    fromContext: {\n        selector: (state, contextA, contextB) => `itemsInContext`, // or a function returning this to make one per component\n        actions: (contextA, contextB) => `actionsForContext`,\n    }\n})\nconst users = pack({\n    fromGroup: {\n        selector: () => createStructuredSelector({\n            users: usersForGroupSelector,\n            usersLoading: usersLoadingForGroupSelector,\n            usersAllLoaded: usersAllLoadedForGroupSelector,\n            usersLoadingErrors: usersLoadingErrorsForGroupSelector,\n        }),\n        actions: (dispatch, group) => ({\n            loadUsers: () => dispatch(loadUsersForGroup(group)),\n            addUserToGroup: user => dispatch(addUserToGroup(user, group)),\n        }), // OR a raw object like actions: { actionA: actionCreatorA, actionB: actionCreatorB }\n    },\n    byPermission: { ... }\n})\n*/\n\nconst memoizeFirstMapStateToProps = (selector, executeContextSelectors, firstState, firstProps, firstValue, firstContext) => {\n    if (executeContextSelectors) {\n        let inner = (state, props) => {\n            inner = (state, props) => selector(state, ...executeContextSelectors(props));\n            if (props !== firstProps) { // nothing salvageable\n                return inner(state, props); \n            }\n            if (state !== firstState) { \n                return selector(state, ...firstContext); // same props, can memoize contexts\n            }\n            return firstValue;// same props and state, can return first value\n        };\n        return (state, props) => inner(state, props);\n    }\n    let inner = state => {\n        inner = selector;\n        return state === firstState ?\n            firstValue :\n            inner(state);\n    };\n    return state => inner(state);\n};\n\nconst checkPacketDescriptor = (packetDescriptor, name, calledFnName, argExpectation) => {\n    if (typeof packetDescriptor !== 'object' || packetDescriptor === null) {\n        throw new TypeError(`${calledFnName} expects ${argExpectation}an object, but ${name} was not.`);\n    }\n    if (packetDescriptor.selector && typeof packetDescriptor.selector !== 'function') {\n        throw new TypeError(`${calledFnName} expects selector to be a function, but ${name}.selector was not.`);\n    }\n    if (packetDescriptor.actions && (typeof packetDescriptor.actions !== 'function' && typeof packetDescriptor.actions !== 'object')) {\n        throw new TypeError(`${calledFnName} expects actions to be a function or object, but ${name}.actions was not.`);\n    }\n};\n\nconst checkPacketMapAndGetNames = packetMap => {\n    if (typeof packetMap !== 'object' || packetMap === null) {\n        throw new TypeError('packAll(packetMap) expects packetMap to be an object.');\n    }\n    if (Array.isArray(packetMap)) {\n        throw new TypeError('packAll(packetMap) expects packetMap to be an object, not an Array.');\n    }\n    const packetNames = Object.keys(packetMap);\n    if (packetNames.length === 0) {\n        throw new TypeError('packAll(packetMap) expected to receive an object with properties, but found no properties.')\n    }\n    return packetNames;\n};\n\nconst selectorExecutor = selectors => {\n    selectors = selectors.map(selector => typeof selector === 'function' ? selector : () => selector);\n    return props => selectors.map(selector => selector(props));\n};\n\nconst internalPack = (packetDescriptor, name) => {\n    const PacketMaker = (...contextSelectors) => {\n        const hasContext = contextSelectors.length !== 0;\n        const executeContextSelectors = hasContext && selectorExecutor(contextSelectors);\n        if ('minimumSelectorsExpected' in packetDescriptor && contextSelectors.length < packetDescriptor.minimumSelectorsExpected) {\n            throw new Error(`The packet ${name} expects at least ${packetDescriptor.minimumSelectorsExpected} selectors to be provided.`);\n        }\n        const mapStateToProps = packetDescriptor.selector ? (firstState, firstProps) => {\n            const firstContext = hasContext ? executeContextSelectors(firstProps) : [];\n            let firstValue = packetDescriptor.selector(firstState, ...firstContext);\n            if (typeof firstValue !== 'function') { // no factory, fully memoized first call\n                return memoizeFirstMapStateToProps(packetDescriptor.selector, executeContextSelectors, firstState, firstProps, firstValue, firstContext);\n            }\n            if (hasContext) { // factory, but memoize first context if we can. Passing in a new object as firstState means we'll never return a memoized firstValue\n                return memoizeFirstMapStateToProps(firstValue, executeContextSelectors, {}, firstProps, null, firstContext);\n            }\n            // factory, no context, no memoization\n            return state => firstValue(state);\n        } : null;\n        const mapDispatchToProps = typeof packetDescriptor.actions === 'function' ?\n            hasContext ?\n                (dispatch, props) => packetDescriptor.actions(dispatch, ...executeContextSelectors(props)) :\n                dispatch => packetDescriptor.actions(dispatch) :\n                packetDescriptor.actions ?\n                dispatch => bindActionCreators(packetDescriptor.actions, dispatch) :\n                null;\n        return {\n            mapStateToProps,\n            mapDispatchToProps,\n        };\n    };\n    if (name) {\n        Object.defineProperty(PacketMaker, 'name', {\n            writable: false,\n            enumerable: false,\n            configurable: true,\n            value: `PacketMaker(${name})`\n        });\n    }\n    return PacketMaker;\n};\n\nexport const pack = (packetDescriptor, name) => {\n    checkPacketDescriptor(packetDescriptor, \"packetDescriptor\", \"pack(packetDescriptor)\", \"\");\n    return internalPack(packetDescriptor, name);\n};\n\nexport const packAll = packetMap => {\n    const packetNames = checkPacketMapAndGetNames(packetMap);\n    return packetNames.reduce((o,name) => {\n        const packetDescriptor = packetMap[name];\n        checkPacketDescriptor(packetDescriptor, `packetMap['${name}']`, \"packAll(packetMap)\", \"each property to be \");\n        o[name] = internalPack(packetDescriptor, name);\n        return o;\n    }, {});\n};","import { bindActionCreators } from \"redux\";\nimport { connect } from 'react-redux';\n\n/*\n//usage of component\ncomponent([\n    users.fromGroup(props => props.group),\n    cards.fromProject(props => props.project, props => props.filterTerm),\n])(({ users = [], usersLoading, usersAllLoaded, usersLoadingErrors, cards, cardsLoading, cardsLoadingErrors, loadUsers, addUserToGroup}) => (\n    <div>\n        <button disabled={usersLoading || usersLoadingErrors} onClick={usersLoading || usersLoadingErrors ? null : loadUsers}>\n            Load users\n        </button>\n        {users.map(user => (\n            <p key={user.id}>{user.name}</p>\n        ))}\n    </div>\n))\n*/\nconst uniqueFilter = (value, i, values) => values.lastIndexOf(value) === i;\nconst nonUniqueFilter = (value, i, values) => values.lastIndexOf(value) !== i;\nconst spreadAllSafe = fallbackName => (...values) => {\n    const nonUniqueProps = values.reduce((a, v) => a.concat(Object.keys(v)),[]).filter(nonUniqueFilter);\n    if (nonUniqueProps.length) {\n        throw new Error(\"Props are not unique. \" +\n            \"Pass in \" + fallbackName + \" to deduplicate them. \" +\n            \"Duplicate names: \" + nonUniqueProps.join(','));\n    }\n    return Object.assign({}, ...values);\n};\nconst defaultMapPacketsToProps = spreadAllSafe(\"mapPacketsToProps\");\nconst defaultMergeProps = (packetProps, ownProps) => ({\n    ...packetProps,\n    ...ownProps\n})\n\nconst noop = () => {};\n\nconst anyContext = (packets, prop) => packets.some(b => typeof b[prop] === 'function' && b[prop].length !== 1);\n\nexport const makeMergePropsOnePacket = (mapPacketsToProps, mergeProps) => {\n    if (!mapPacketsToProps) {\n        if (!mergeProps) {\n            return undefined;\n        }\n        return (stateProps, dispatchProps, ownProps) => mergeProps(\n            {\n                ...stateProps,\n                ...dispatchProps\n            },\n            ownProps\n        );\n    }\n    if (!mergeProps) {\n        return (stateProps, dispatchProps, ownProps) => ({\n            ...mapPacketsToProps({\n                ...stateProps,\n                ...dispatchProps\n            }),\n            ...ownProps\n        });\n    }\n    return (stateProps, dispatchProps, ownProps) => mergeProps(\n        mapPacketsToProps({\n            ...stateProps,\n            ...dispatchProps\n        }),\n        ownProps\n    );\n};\n\nexport const consumeOnePacket = (\n    packet,\n    mapPacketsToProps,\n    mergeProps,\n    options\n) => connect(\n    packet.mapStateToProps || undefined,\n    packet.mapDispatchToProps || undefined,\n    makeMergePropsOnePacket(mapPacketsToProps, mergeProps),\n    options\n);\n\nexport const makeMapStateToProps = (packets, withState) =>\n    (withState.length || undefined) && (\n        anyContext(withState, 'mapStateToProps')\n            ? (state, props) => {\n                const mapStateToPropsList = packets\n                    .map(b => b.mapStateToProps ? b.mapStateToProps(state, props) : noop);\n                return (state, props) => ({\n                    packets: mapStateToPropsList.map(mapper => mapper(state, props))\n                });\n            }\n            : state => {\n                const mapStateToPropsList = packets\n                    .map(b => b.mapStateToProps ? b.mapStateToProps(state) : noop);\n                return state => ({\n                    packets: mapStateToPropsList.map(mapper => mapper(state))\n                });\n            }\n    );\n\nexport const makeMapDispatchToProps = (packets, withDispatch) =>\n    (withDispatch.length || undefined) && (\n        anyContext(withDispatch, 'mapDispatchToProps')\n            ? (dispatch, props) => ({\n                packets: packets.map(b =>\n                    b.mapDispatchToProps\n                        ? typeof b.mapDispatchToProps === 'function'\n                            ? b.mapDispatchToProps(dispatch, props)\n                            : bindActionCreators(b.mapDispatchToProps, dispatch)\n                        : undefined\n                )\n            })\n            : (dispatch) => ({\n                packets: packets.map(b =>\n                    b.mapDispatchToProps\n                        ? typeof b.mapDispatchToProps === 'function'\n                            ? b.mapDispatchToProps(dispatch)\n                            : bindActionCreators(b.mapDispatchToProps, dispatch)\n                        : undefined\n                )\n            })\n    );\n\nexport const makeMergeProps = (mapPacketsToProps, mergeProps) => {\n    if (!mapPacketsToProps) {\n        mapPacketsToProps = defaultMapPacketsToProps;\n    }\n    if (!mergeProps) {\n        mergeProps = defaultMergeProps;\n    }\n    return (stateProps, dispatchProps, ownProps) => {\n        const propsByPacket = stateProps.packets.map((packetState, i) => {\n            const packetDispatch = dispatchProps.packets[i];\n            return {\n                ...packetState,\n                ...packetDispatch\n            };\n        });\n        const packetProps = mapPacketsToProps(...propsByPacket);\n        return mergeProps(packetProps, ownProps);\n    };\n};\n\nexport const consume = (\n    packets,\n    mapPacketsToProps,\n    mergeProps,\n    options\n) => {\n    if (packets && (packets.mapStateToProps || packets.mapDispatchToProps)) {\n        packets = [packets];\n    }\n    if (!Array.isArray(packets) || packets.length === 0) {\n        throw new TypeError('At least one packets must be passed to component()')\n    }\n\n    if (packets.length === 1) return consumeOnePacket(packets[0], mapPacketsToProps, mergeProps, options);\n\n    return connect(\n        makeMapStateToProps(packets, packets.filter(b => b.mapStateToProps)),\n        makeMapDispatchToProps(packets, packets.filter(b => b.mapDispatchToProps)),\n        makeMergeProps(mapPacketsToProps, mergeProps),\n        options\n    );\n};\n"],"names":["memoizeFirstMapStateToProps","selector","executeContextSelectors","firstState","firstProps","firstValue","firstContext","inner","state","props","checkPacketDescriptor","packetDescriptor","name","calledFnName","argExpectation","TypeError","actions","checkPacketMapAndGetNames","packetMap","Array","isArray","packetNames","Object","keys","length","selectorExecutor","selectors","map","internalPack","PacketMaker","contextSelectors","hasContext","minimumSelectorsExpected","Error","mapStateToProps","mapDispatchToProps","dispatch","bindActionCreators","defineProperty","writable","enumerable","configurable","value","pack","packAll","reduce","o","uniqueFilter","nonUniqueFilter","i","values","lastIndexOf","spreadAllSafe","fallbackName","nonUniqueProps","a","v","concat","filter","join","assign","defaultMapPacketsToProps","defaultMergeProps","packetProps","ownProps","noop","anyContext","packets","prop","some","b","makeMergePropsOnePacket","mapPacketsToProps","mergeProps","stateProps","dispatchProps","consumeOnePacket","packet","options","connect","makeMapStateToProps","withState","mapStateToPropsList","mapper","makeMapDispatchToProps","withDispatch","makeMergeProps","propsByPacket","packetState","packetDispatch","consume"],"mappings":"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"}