{"version":3,"file":"redux-packet.js","sources":["../src/pack.js","../src/consume.js"],"sourcesContent":["import { bindActionCreators } from \"redux\";\n\n/*\n//usage of pack\npackAll({\n    fromContext: {\n        selector: (state, contextA, contextB) => `itemsInContext`, // or a function returning this to make one selector per component for caching purposes\n        actions: (contextA, contextB) => `actionsForContext`,\n    }\n})\nconst users = packAll({\n    fromGroup: {\n        selector: () => createStructuredSelector({\n            users: usersForGroupSelector,\n            usersLoading: usersLoadingForGroupSelector,\n            usersAllLoaded: usersAllLoadedForGroupSelector,\n            usersLoadingErrors: usersLoadingErrorsForGroupSelector,\n        }),\n        actions: (dispatch, group) => ({\n            loadUsers: () => dispatch(loadUsersForGroup(group)),\n            addUserToGroup: user => dispatch(addUserToGroup(user, group)),\n        }), // OR a raw object like actions: { actionA: actionCreatorA, actionB: actionCreatorB }\n    },\n    byPermission: { ... }\n})\n*/\n\nconst memoizeFirstMapStateToProps = (selector, executeContextSelectors, firstState, firstProps, firstValue, firstContext) => {\n    if (executeContextSelectors) {\n        let inner = (state, props) => {\n            inner = (state, props) => selector(state, ...executeContextSelectors(props));\n            if (props !== firstProps) { // nothing salvageable\n                return inner(state, props); \n            }\n            if (state !== firstState) { \n                return selector(state, ...firstContext); // same props, can memoize contexts\n            }\n            return firstValue;// same props and state, can return first value\n        };\n        return (state, props) => inner(state, props);\n    }\n    let inner = state => {\n        inner = selector;\n        return state === firstState ?\n            firstValue :\n            inner(state);\n    };\n    return state => inner(state);\n};\n\nconst checkPacketDescriptor = (packetDescriptor, name, calledFnName, argExpectation) => {\n    if (typeof packetDescriptor !== 'object' || packetDescriptor === null) {\n        throw new TypeError(`${calledFnName} expects ${argExpectation}an object, but ${name} was not.`);\n    }\n    if (packetDescriptor.selector && typeof packetDescriptor.selector !== 'function') {\n        throw new TypeError(`${calledFnName} expects selector to be a function, but ${name}.selector was not.`);\n    }\n    if (packetDescriptor.actions && (typeof packetDescriptor.actions !== 'function' && typeof packetDescriptor.actions !== 'object')) {\n        throw new TypeError(`${calledFnName} expects actions to be a function or object, but ${name}.actions was not.`);\n    }\n    if (!packetDescriptor.selector && !packetDescriptor.actions) {\n        throw new TypeError(`${calledFnName} expects either selector or actions to be present, but ${name} had neither.`);\n    }\n};\n\nconst checkPacketMapAndGetNames = packetMap => {\n    if (typeof packetMap !== 'object' || packetMap === null) {\n        throw new TypeError('packAll(packetMap) expects packetMap to be an object.');\n    }\n    if (Array.isArray(packetMap)) {\n        throw new TypeError('packAll(packetMap) expects packetMap to be an object, not an Array.');\n    }\n    const packetNames = Object.keys(packetMap);\n    if (packetNames.length === 0) {\n        throw new TypeError('packAll(packetMap) expected to receive an object with properties, but found no properties.')\n    }\n    return packetNames;\n};\n\nconst selectorExecutor = selectors => {\n    selectors = selectors.map(selector => typeof selector === 'function' ? selector : () => selector);\n    return props => selectors.map(selector => selector(props));\n};\n\nconst internalPack = (packetDescriptor, name) => {\n    const PacketMaker = (...contextSelectors) => {\n        const hasContext = contextSelectors.length !== 0;\n        const executeContextSelectors = hasContext && selectorExecutor(contextSelectors);\n        if ('minimumSelectorsExpected' in packetDescriptor && contextSelectors.length < packetDescriptor.minimumSelectorsExpected) {\n            const expected = packetDescriptor.minimumSelectorsExpected;\n            throw new Error(`The packet ${name} expects at least ${expected} ${expected === 1 ? 'selector' : 'selectors'} to be provided.`);\n        }\n        const mapStateToProps = packetDescriptor.selector ? (firstState, firstProps) => {\n            const firstContext = hasContext ? executeContextSelectors(firstProps) : [];\n            let firstValue = packetDescriptor.selector(firstState, ...firstContext);\n            if (typeof firstValue !== 'function') { // no factory, fully memoized first call\n                return memoizeFirstMapStateToProps(packetDescriptor.selector, executeContextSelectors, firstState, firstProps, firstValue, firstContext);\n            }\n            if (hasContext) { // factory, but memoize first context if we can. Passing in a new object as firstState means we'll never return a memoized firstValue\n                return memoizeFirstMapStateToProps(firstValue, executeContextSelectors, {}, firstProps, null, firstContext);\n            }\n            // factory, no context, no memoization\n            return state => firstValue(state);\n        } : null;\n        const mapDispatchToProps = typeof packetDescriptor.actions === 'function' ?\n            hasContext ?\n                (dispatch, props) => packetDescriptor.actions(dispatch, ...executeContextSelectors(props)) :\n                dispatch => packetDescriptor.actions(dispatch) :\n                packetDescriptor.actions ?\n                dispatch => bindActionCreators(packetDescriptor.actions, dispatch) :\n                null;\n        return {\n            mapStateToProps,\n            mapDispatchToProps,\n        };\n    };\n    if (name) {\n        Object.defineProperty(PacketMaker, 'name', {\n            writable: false,\n            enumerable: false,\n            configurable: true,\n            value: `PacketMaker(${name})`\n        });\n    }\n    return PacketMaker;\n};\n\nexport const pack = (packetDescriptor, name) => {\n    checkPacketDescriptor(packetDescriptor, \"packetDescriptor\", \"pack(packetDescriptor)\", \"\");\n    return internalPack(packetDescriptor, name);\n};\n\nexport const packAll = packetMap => {\n    const packetNames = checkPacketMapAndGetNames(packetMap);\n    return packetNames.reduce((o,name) => {\n        const packetDescriptor = packetMap[name];\n        checkPacketDescriptor(packetDescriptor, `packetMap['${name}']`, \"packAll(packetMap)\", \"each property to be \");\n        o[name] = internalPack(packetDescriptor, name);\n        return o;\n    }, {});\n};","import { bindActionCreators } from \"redux\";\nimport { connect } from 'react-redux';\n\n/*\n//usage of consume\nconsume([\n    users.fromGroup(props => props.group),\n    cards.fromProject(props => props.project, props => props.filterTerm),\n])(({ users = [], usersLoading, usersAllLoaded, usersLoadingErrors, cards, cardsLoading, cardsLoadingErrors, loadUsers, addUserToGroup}) => (\n    <div>\n        <button disabled={usersLoading || usersLoadingErrors} onClick={usersLoading || usersLoadingErrors ? null : loadUsers}>\n            Load users\n        </button>\n        {users.map(user => (\n            <p key={user.id}>{user.name}</p>\n        ))}\n    </div>\n))\n*/\nconst concatKeys = (arr, obj) => arr.concat(Object.keys(obj));\nconst nonUniqueFilter = (value, i, values) => values.lastIndexOf(value) !== i;\nconst defaultMapPacketsToProps = (...values) => {\n    const nonUniqueProps = values.reduce(concatKeys,[]).filter(nonUniqueFilter);\n    if (nonUniqueProps.length) {\n        throw new Error(\"Props are not unique. \" +\n            \"Pass in mapPacketsToProps to deduplicate them. \" +\n            \"Duplicate names: \" + nonUniqueProps.join(','));\n    }\n    return Object.assign({}, ...values);\n};\nconst defaultMergeProps = (packetProps, ownProps) => ({\n    ...ownProps,\n    ...packetProps\n})\n\nconst noop = (a) => {};\nconst usesContext = fn => typeof fn === 'function' && (fn.dependsOnOwnProps == null ? fn.length !== 1 : Boolean(fn.dependsOnOwnProps));\nconst stateUsesContext = packet => usesContext(packet.mapStateToProps);\n\nexport const makeMergePropsOnePacket = (mapPacketsToProps, mergeProps) => {\n    if (!mapPacketsToProps) {\n        if (!mergeProps) {\n            return undefined;\n        }\n        return (stateProps, dispatchProps, ownProps) => mergeProps(\n            {\n                ...stateProps,\n                ...dispatchProps\n            },\n            ownProps\n        );\n    }\n    if (!mergeProps) {\n        return (stateProps, dispatchProps, ownProps) => ({\n            ...ownProps,\n            ...mapPacketsToProps({\n                ...stateProps,\n                ...dispatchProps\n            })\n        });\n    }\n    return (stateProps, dispatchProps, ownProps) => mergeProps(\n        mapPacketsToProps({\n            ...stateProps,\n            ...dispatchProps\n        }),\n        ownProps\n    );\n};\n\nexport const consumeOnePacket = (\n    packet,\n    mapPacketsToProps,\n    mergeProps,\n    options\n) => connect(\n    packet.mapStateToProps || undefined,\n    packet.mapDispatchToProps || undefined,\n    makeMergePropsOnePacket(mapPacketsToProps, mergeProps),\n    options\n);\n\nconst mapAllToPackets = mappers => {\n    const anyContext = mappers.filter(Boolean).some(usesContext);\n    return anyContext\n        ? (stateOrDispatch, props) => ({\n            packets: mappers.map(mapper => mapper(stateOrDispatch, props))\n        })\n        : stateOrDispatch => ({\n            packets: mappers.map(mapper => mapper(stateOrDispatch))\n        });\n};\n\nexport const makeMapStateToProps = (packets, withState) =>\n    (withState.length || undefined) && (\n        withState.some(stateUsesContext)\n            ? (state, props) => mapAllToPackets(packets.map(b => b.mapStateToProps ? b.mapStateToProps(state, props) : noop))\n            : state => mapAllToPackets(packets.map(b => b.mapStateToProps ? b.mapStateToProps(state) : noop))\n    );\n\nexport const makeMapDispatchToProps = (packets, withDispatch) =>\n    (withDispatch.length || undefined) && (\n        mapAllToPackets(packets.map(packet =>\n            packet.mapDispatchToProps\n                ? typeof packet.mapDispatchToProps === 'function'\n                    ? packet.mapDispatchToProps\n                    : dispatch => bindActionCreators(packet.mapDispatchToProps, dispatch)\n                : noop\n        ))\n    );\n\nexport const makeMergeProps = (mapPacketsToProps, mergeProps) => {\n    if (!mapPacketsToProps) {\n        mapPacketsToProps = defaultMapPacketsToProps;\n    }\n    if (!mergeProps) {\n        mergeProps = defaultMergeProps;\n    }\n    return (stateProps, dispatchProps, ownProps) => {\n        const propsByPacket = stateProps.packets.map((packetState, i) => {\n            const packetDispatch = dispatchProps.packets[i];\n            return {\n                ...packetState,\n                ...packetDispatch\n            };\n        });\n        const packetProps = mapPacketsToProps(...propsByPacket);\n        return mergeProps(packetProps, ownProps);\n    };\n};\n\nexport const consumeMultiplePackets = (\n    packets,\n    mapPacketsToProps,\n    mergeProps,\n    options\n) => connect(\n    makeMapStateToProps(packets, packets.filter(b => b.mapStateToProps)),\n    makeMapDispatchToProps(packets, packets.filter(b => b.mapDispatchToProps)),\n    makeMergeProps(mapPacketsToProps, mergeProps),\n    options\n);\n\nexport const consume = (\n    packets,\n    mapPacketsToProps,\n    mergeProps,\n    options\n) => {\n    if (packets && (packets.mapStateToProps || packets.mapDispatchToProps)) {\n        packets = [packets];\n    }\n    if (!Array.isArray(packets) || packets.length === 0) {\n        throw new TypeError('At least one packet must be passed to consume()')\n    }\n\n    if (packets.length === 1) {\n        return consumeOnePacket(packets[0], mapPacketsToProps, mergeProps, options);\n    }\n    return consumeMultiplePackets(packets, mapPacketsToProps, mergeProps, options);\n};\n"],"names":["memoizeFirstMapStateToProps","selector","executeContextSelectors","firstState","firstProps","firstValue","firstContext","inner","state","props","checkPacketDescriptor","packetDescriptor","name","calledFnName","argExpectation","TypeError","actions","checkPacketMapAndGetNames","packetMap","Array","isArray","packetNames","Object","keys","length","selectorExecutor","selectors","map","internalPack","PacketMaker","contextSelectors","hasContext","minimumSelectorsExpected","expected","Error","mapStateToProps","mapDispatchToProps","dispatch","bindActionCreators","defineProperty","writable","enumerable","configurable","value","pack","packAll","reduce","o","concatKeys","arr","obj","concat","nonUniqueFilter","i","values","lastIndexOf","defaultMapPacketsToProps","nonUniqueProps","filter","join","assign","defaultMergeProps","packetProps","ownProps","noop","usesContext","fn","dependsOnOwnProps","stateUsesContext","packet","makeMergePropsOnePacket","mapPacketsToProps","mergeProps","stateProps","dispatchProps","consumeOnePacket","options","connect","mapAllToPackets","mappers","anyContext","Boolean","some","stateOrDispatch","packets","mapper","makeMapStateToProps","withState","b","makeMapDispatchToProps","withDispatch","makeMergeProps","propsByPacket","packetState","packetDispatch","consumeMultiplePackets","consume"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;MA2BMA,2BAA2B,CAAG,SAACC,CAAD,CAAWC,CAAX,CAAoCC,CAApC,CAAgDC,CAAhD,CAA4DC,CAA5D,CAAwEC,CAAxE,CAAyF,CACzH,GAAIJ,CAAJ,CAA6B,CACzB,IAAIK,CAAK,CAAG,WAACC,CAAD,CAAQC,CAAR,CAAkB,QAC1BF,CAAK,CAAG,WAACC,CAAD,CAAQC,CAAR,SAAkBR,CAAQ,MAAR,SAASO,CAAT,4BAAmBN,CAAuB,CAACO,CAAD,CAA1C,GAAlB,CADkB,CAEtBA,CAAK,GAAKL,CAFY,CAKtBI,CAAK,GAAKL,CALY,CAQnBE,CARmB,CAMfJ,CAAQ,MAAR,SAASO,CAAT,4BAAmBF,CAAnB,GANe,CAGfC,CAAK,CAACC,CAAD,CAAQC,CAAR,CAHU,CAQR;EACrB,CATD,CAUA,gBAAQD,CAAD,CAAQC,CAAR,SAAkBF,CAAK,CAACC,CAAD,CAAQC,CAAR,CAAvB,CACV,CACD,IAAIF,CAAK,CAAG,WAAAC,CAAK,CAAI,CAEjB,OADAD,CAAK,CAAGN,CACR,CAAOO,CAAK,GAAKL,CAAV,CACHE,CADG,CAEHE,CAAK,CAACC,CAAD,CACZ,CALD,CAMA,gBAAOA,CAAK,SAAID,CAAK,CAACC,CAAD,CAAT,CACf,EAEKE,qBAAqB,CAAG,SAACC,CAAD,CAAmBC,CAAnB,CAAyBC,CAAzB,CAAuCC,CAAvC,CAA0D,CACpF,GAAgC,QAA5B,WAAOH,CAAP,GAA6D,IAArB,GAAAA,CAA5C,CACI,UAAUI,SAAJ,WAAiBF,CAAjB,qBAAyCC,CAAzC,2BAAyEF,CAAzE,cAAN,CAEJ,GAAID,CAAgB,CAACV,QAAjB,EAAkE,UAArC,SAAOU,CAAgB,CAACV,QAAzD,CACI,UAAUc,SAAJ,WAAiBF,CAAjB,oDAAwED,CAAxE,uBAAN,CAEJ,GAAID,CAAgB,CAACK,OAAjB,EAAiE,UAApC,SAAOL,CAAgB,CAACK,OAAxB,EAAsF,QAApC,WAAOL,CAAgB,CAACK,OAAxB,CAAnF,CACI,UAAUD,SAAJ,WAAiBF,CAAjB,6DAAiFD,CAAjF,sBAAN,CAEJ,GAAI,CAACD,CAAgB,CAACV,QAAlB,EAA8B,CAACU,CAAgB,CAACK,OAApD,CACI,UAAUD,SAAJ,WAAiBF,CAAjB,mEAAuFD,CAAvF,kBAEb,EAEKK,yBAAyB,CAAG,SAAAC,CAAS,CAAI,CAC3C,GAAyB,QAArB,WAAOA,CAAP,GAA+C,IAAd,GAAAA,CAArC,CACI,UAAUH,SAAJ,CAAc,uDAAd,CAAN,CAEJ,GAAII,KAAK,CAACC,OAAN,CAAcF,CAAd,CAAJ,CACI,UAAUH,SAAJ,CAAc,qEAAd,CAAN,CAEJ,IAAMM,CAAW,CAAGC,MAAM,CAACC,IAAP,CAAYL,CAAZ,CAApB,CACA,GAA2B,CAAvB,GAAAG,CAAW,CAACG,MAAhB,CACI,UAAUT,SAAJ,CAAc,4FAAd,CAAN,CAEJ,OAAOM,CACV,EAEKI,gBAAgB,CAAG,SAAAC,CAAS,CAAI,CAElC,OADAA,CAAS,CAAGA,CAAS,CAACC,GAAV,CAAc,SAAA1B,CAAQ,SAAwB,UAApB,SAAOA,CAAP,CAAiCA,CAAjC,CAA4C,kBAAMA,CAAN,CAAhD,CAAtB,CACZ,CAAO,SAAAQ,CAAK,SAAIiB,CAAS,CAACC,GAAV,CAAc,SAAA1B,CAAQ,SAAIA,CAAQ,CAACQ,CAAD,CAAZ,CAAtB,CAAJ,CACf,EAEKmB,YAAY,CAAG,SAACjB,CAAD,CAAmBC,CAAnB,CAA4B,CAC7C,IAAMiB,CAAW,CAAG,UAAyB,4BAArBC,CAAqB,sBAArBA,CAAqB,qBACnCC,CAAU,CAA+B,CAA5B,GAAAD,CAAgB,CAACN,MADK,CAEnCtB,CAAuB,CAAG6B,CAAU,EAAIN,gBAAgB,CAACK,CAAD,CAFrB,CAGzC,GAAI,6BAA8BnB,CAA9B,EAAkDmB,CAAgB,CAACN,MAAjB,CAA0Bb,CAAgB,CAACqB,wBAAjG,CAA2H,CACvH,IAAMC,CAAQ,CAAGtB,CAAgB,CAACqB,wBAAlC,CACA,UAAUE,KAAJ,sBAAwBtB,CAAxB,8BAAiDqB,CAAjD,aAA0E,CAAb,GAAAA,CAAQ,CAAS,UAAT,CAAsB,WAA3F,qBACT,CANwC,IAOnCE,CAAe,CAAGxB,CAAgB,CAACV,QAAjB,CAA4B,SAACE,CAAD,CAAaC,CAAb,CAA4B,KACtEE,CAAY,CAAGyB,CAAU,CAAG7B,CAAuB,CAACE,CAAD,CAA1B,CAAyC,EADI,CAExEC,CAAU,CAAGM,CAAgB,CAACV,QAAjB,OAAAU,CAAgB,EAAUR,CAAV,4BAAyBG,CAAzB,GAF2C,QAGlD,UAAtB,SAAOD,CAHiE,CAMxE0B,CANwE,CAOjE/B,2BAA2B,CAACK,CAAD,CAAaH,CAAb,CAAsC,EAAtC,CAA0CE,CAA1C,CAAsD,IAAtD,CAA4DE,CAA5D,CAPsC,CAUrE,SAAAE,CAAK,SAAIH,CAAU,CAACG,CAAD,CAAd,CAVgE,CAIjER,2BAA2B,CAACW,CAAgB,CAACV,QAAlB,CAA4BC,CAA5B,CAAqDC,CAArD,CAAiEC,CAAjE,CAA6EC,CAA7E,CAAyFC,CAAzF,CAJsC,CAS5E;EAEH,CAXuB,CAWpB,IAlBqC,CAmBnC8B,CAAkB,CAAuC,UAApC,SAAOzB,CAAgB,CAACK,OAAxB,CACvBe,CAAU,CACN,SAACM,CAAD,CAAW5B,CAAX,SAAqBE,CAAgB,CAACK,OAAjB,OAAAL,CAAgB,EAAS0B,CAAT,4BAAsBnC,CAAuB,CAACO,CAAD,CAA7C,GAArC,CADM,CAEN,SAAA4B,CAAQ,SAAI1B,CAAgB,CAACK,OAAjB,CAAyBqB,CAAzB,CAAJ,CAHW,CAInB1B,CAAgB,CAACK,OAAjB,CACA,SAAAqB,CAAQ,SAAIC,wBAAkB,CAAC3B,CAAgB,CAACK,OAAlB,CAA2BqB,CAA3B,CAAtB,CADR,CAEA,IAzBiC,CA0BzC,OAAO,CACHF,eAAe,CAAfA,CADG,CAEHC,kBAAkB,CAAlBA,CAFG,CAIV,CA9BD,CAuCA,OARIxB,CAQJ,EAPIU,MAAM,CAACiB,cAAP,CAAsBV,CAAtB,CAAmC,MAAnC,CAA2C,CACvCW,QAAQ,GAD+B,CAEvCC,UAAU,GAF6B,CAGvCC,YAAY,GAH2B,CAIvCC,KAAK,uBAAiB/B,CAAjB,KAJkC,CAA3C,CAOJ,CAAOiB,CACV,EAED,AAAae,IAAAA,IAAI,CAAG,SAACjC,CAAD,CAAmBC,CAAnB,CAA4B,CAE5C,OADAF,qBAAqB,CAACC,CAAD,CAAmB,kBAAnB,CAAuC,wBAAvC,CAAiE,EAAjE,CACrB,CAAOiB,YAAY,CAACjB,CAAD,CAAmBC,CAAnB,CACtB,CAHM,CAKMiC,IAAAA,OAAO,CAAG,SAAA3B,CAAS,CAAI,CAChC,IAAMG,CAAW,CAAGJ,yBAAyB,CAACC,CAAD,CAA7C,CACA,OAAOG,CAAW,CAACyB,MAAZ,CAAmB,SAACC,CAAD,CAAGnC,CAAH,CAAY,CAClC,IAAMD,CAAgB,CAAGO,CAAS,CAACN,CAAD,CAAlC,CAGA,OAFAF,qBAAqB,CAACC,CAAD,sBAAiCC,CAAjC,OAA2C,oBAA3C,CAAiE,sBAAjE,CAErB,CADAmC,CAAC,CAACnC,CAAD,CAAD,CAAUgB,YAAY,CAACjB,CAAD,CAAmBC,CAAnB,CACtB,CAAOmC,CACV,CALM,CAKJ,EALI,CAMV,CARM;;MCjHDC,UAAU,CAAG,SAACC,CAAD,CAAMC,CAAN,SAAcD,CAAG,CAACE,MAAJ,CAAW7B,MAAM,CAACC,IAAP,CAAY2B,CAAZ,CAAX,CAAd,EACbE,eAAe,CAAG,SAACT,CAAD,CAAQU,CAAR,CAAWC,CAAX,SAAsBA,CAAM,CAACC,WAAP,CAAmBZ,CAAnB,IAA8BU,CAApD,EAClBG,wBAAwB,CAAG,UAAe,4BAAXF,CAAW,sBAAXA,CAAW,iBAC5C,IAAMG,CAAc,CAAGH,CAAM,CAACR,MAAP,CAAcE,UAAd,CAAyB,EAAzB,EAA6BU,MAA7B,CAAoCN,eAApC,CAAvB,CACA,GAAIK,CAAc,CAACjC,MAAnB,CACI,UAAUU,KAAJ,CAAU,yFAEUuB,CAAc,CAACE,IAAf,CAAoB,GAApB,CAFpB,CAAN,CAIJ,OAAOrC,MAAM,CAACsC,MAAP,OAAAtC,MAAM,EAAQ,EAAR,SAAegC,CAAf,EAChB,EACKO,iBAAiB,CAAG,SAACC,CAAD,CAAcC,CAAd,0BACnBA,CADmB,CAEnBD,CAFmB,GAKpBE,IAAI,CAAG,UAAO,GACdC,WAAW,CAAG,SAAAC,CAAE,SAAkB,UAAd,SAAOA,CAAP,GAAqD,IAAxB,EAAAA,CAAE,CAACC,iBAAH,CAA6C,CAAd,GAAAD,CAAE,CAAC1C,MAAlC,GAAyD0C,CAAE,CAACC,iBAAzF,CAAJ,EAChBC,gBAAgB,CAAG,SAAAC,CAAM,SAAIJ,WAAW,CAACI,CAAM,CAAClC,eAAR,CAAf,EAE/B,IAAamC,uBAAuB,CAAG,SAACC,CAAD,CAAoBC,CAApB,CAAmC,QACjED,CADiE,CAajEC,CAbiE,CAsB/D,SAACC,CAAD,CAAaC,CAAb,CAA4BX,CAA5B,SAAyCS,CAAU,CACtDD,CAAiB,kBACVE,CADU,CAEVC,CAFU,EADqC,CAKtDX,CALsD,CAAnD,CAtB+D,CAc3D,SAACU,CAAD,CAAaC,CAAb,CAA4BX,CAA5B,0BACAA,CADA,CAEAQ,CAAiB,kBACbE,CADa,CAEbC,CAFa,EAFjB,EAd2D,CAE7DF,CAF6D,CAK3D,SAACC,CAAD,CAAaC,CAAb,CAA4BX,CAA5B,SAAyCS,CAAU,kBAE/CC,CAF+C,CAG/CC,CAH+C,EAKtDX,CALsD,CAAnD,CAL2D,OA6BzE,CA7BM,CA+BP,IAAaY,gBAAgB,CAAG,SAC5BN,CAD4B,CAE5BE,CAF4B,CAG5BC,CAH4B,CAI5BI,CAJ4B,SAK3BC,kBAAO,CACRR,CAAM,CAAClC,eAAP,QADQ,CAERkC,CAAM,CAACjC,kBAAP,QAFQ,CAGRkC,uBAAuB,CAACC,CAAD,CAAoBC,CAApB,CAHf,CAIRI,CAJQ,CALoB,CAAzB,CAYP,IAAME,eAAe,CAAG,SAAAC,CAAO,CAAI,CAC/B,IAAMC,CAAU,CAAGD,CAAO,CAACrB,MAAR,CAAeuB,OAAf,EAAwBC,IAAxB,CAA6BjB,WAA7B,CAAnB,CACA,OAAOe,CAAU,CACX,SAACG,CAAD,CAAkB1E,CAAlB,SAA6B,CAC3B2E,OAAO,CAAEL,CAAO,CAACpD,GAAR,CAAY,SAAA0D,CAAM,SAAIA,CAAM,CAACF,CAAD,CAAkB1E,CAAlB,CAAV,CAAlB,CADkB,CAA7B,CADW,CAIX,SAAA0E,CAAe,SAAK,CAClBC,OAAO,CAAEL,CAAO,CAACpD,GAAR,CAAY,SAAA0D,CAAM,SAAIA,CAAM,CAACF,CAAD,CAAV,CAAlB,CADS,CAAL,CAGxB,CATD,CAWA,IAAaG,mBAAmB,CAAG,SAACF,CAAD,CAAUG,CAAV,SAC/B,CAACA,CAAS,CAAC/D,MAAV,QAAD,IACI+D,CAAS,CAACL,IAAV,CAAed,gBAAf,EACM,SAAC5D,CAAD,CAAQC,CAAR,SAAkBqE,eAAe,CAACM,CAAO,CAACzD,GAAR,CAAY,SAAA6D,CAAC,SAAIA,CAAC,CAACrD,eAAF,CAAoBqD,CAAC,CAACrD,eAAF,CAAkB3B,CAAlB,CAAyBC,CAAzB,CAApB,CAAsDuD,IAA1D,CAAb,CAAD,CAAjC,CADN,CAEM,SAAAxD,CAAK,SAAIsE,eAAe,CAACM,CAAO,CAACzD,GAAR,CAAY,SAAA6D,CAAC,SAAIA,CAAC,CAACrD,eAAF,CAAoBqD,CAAC,CAACrD,eAAF,CAAkB3B,CAAlB,CAApB,CAA+CwD,IAAnD,CAAb,CAAD,CAAnB,CAHf,CAD+B,CAA5B,CAOP,IAAayB,sBAAsB,CAAG,SAACL,CAAD,CAAUM,CAAV,SAClC,CAACA,CAAY,CAAClE,MAAb,QAAD,GACIsD,eAAe,CAACM,CAAO,CAACzD,GAAR,CAAY,SAAA0C,CAAM,SAC9BA,CAAM,CAACjC,kBAAP,CAC2C,UAArC,SAAOiC,CAAM,CAACjC,kBAAd,CACIiC,CAAM,CAACjC,kBADX,CAEI,SAAAC,CAAQ,SAAIC,wBAAkB,CAAC+B,CAAM,CAACjC,kBAAR,CAA4BC,CAA5B,CAAtB,CAHlB,CAIM2B,IALwB,CAAlB,CAAD,CAFe,CAA/B,CAWP,IAAa2B,cAAc,CAAG,SAACpB,CAAD,CAAoBC,CAApB,CAAmC,CAO7D,OANKD,CAML,GALIA,CAAiB,CAAGf,wBAKxB,EAHKgB,CAGL,GAFIA,CAAU,CAAGX,iBAEjB,EAAO,SAACY,CAAD,CAAaC,CAAb,CAA4BX,CAA5B,CAAyC,KACtC6B,CAAa,CAAGnB,CAAU,CAACW,OAAX,CAAmBzD,GAAnB,CAAuB,SAACkE,CAAD,CAAcxC,CAAd,CAAoB,CAC7D,IAAMyC,CAAc,CAAGpB,CAAa,CAACU,OAAd,CAAsB/B,CAAtB,CAAvB,CACA,wBACOwC,CADP,CAEOC,CAFP,CAIH,CANqB,CADsB,CAQtChC,CAAW,CAAGS,CAAiB,MAAjB,2BAAqBqB,CAArB,EARwB,CAS5C,OAAOpB,CAAU,CAACV,CAAD,CAAcC,CAAd,CACpB,CACJ,CAlBM,CAoBP,IAAagC,sBAAsB,CAAG,SAClCX,CADkC,CAElCb,CAFkC,CAGlCC,CAHkC,CAIlCI,CAJkC,SAKjCC,kBAAO,CACRS,mBAAmB,CAACF,CAAD,CAAUA,CAAO,CAAC1B,MAAR,CAAe,SAAA8B,CAAC,SAAIA,CAAC,CAACrD,eAAN,CAAhB,CAAV,CADX,CAERsD,sBAAsB,CAACL,CAAD,CAAUA,CAAO,CAAC1B,MAAR,CAAe,SAAA8B,CAAC,SAAIA,CAAC,CAACpD,kBAAN,CAAhB,CAAV,CAFd,CAGRuD,cAAc,CAACpB,CAAD,CAAoBC,CAApB,CAHN,CAIRI,CAJQ,CAL0B,CAA/B,CAYP,AAAaoB,IAAAA,OAAO,CAAG,SACnBZ,CADmB,CAEnBb,CAFmB,CAGnBC,CAHmB,CAInBI,CAJmB,CAKlB,CAID,GAHIQ,CAAO,GAAKA,CAAO,CAACjD,eAAR,EAA2BiD,CAAO,CAAChD,kBAAxC,CAGX,GAFIgD,CAAO,CAAG,CAACA,CAAD,CAEd,EAAI,CAACjE,KAAK,CAACC,OAAN,CAAcgE,CAAd,CAAD,EAA8C,CAAnB,GAAAA,CAAO,CAAC5D,MAAvC,CACI,UAAUT,SAAJ,CAAc,iDAAd,CAAN,CALH,QAQG,GAAAqE,CAAO,CAAC5D,MARX,CASUmD,gBAAgB,CAACS,CAAO,CAAC,CAAD,CAAR,CAAab,CAAb,CAAgCC,CAAhC,CAA4CI,CAA5C,CAT1B,CAWMmB,sBAAsB,CAACX,CAAD,CAAUb,CAAV,CAA6BC,CAA7B,CAAyCI,CAAzC,CAChC,CAjBM;;;;;;;;;;;;;;"}